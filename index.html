<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Now Playing - ping_pingado</title>
    <style>
      body {
        margin: 0;
        background: transparent;
        color: white;
        font-family: sans-serif;
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <div id="now-playing">A carregar mÃºsica...</div>

    <script>
      const username = "ping_pingado";
      const apiKey = "b25b959554ed76058ac220b7b2e0a026"; // Key pÃºblica da Last.fm
      const container = document.getElementById("now-playing");

      async function updateTrack() {
        try {
          const res = await fetch(
            `https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${username}&api_key=${apiKey}&format=json&limit=1`
          );
          const data = await res.json();
          const track = data.recenttracks.track[0];

          const isPlaying = track["@attr"] && track["@attr"].nowplaying;
          const text = isPlaying
            ? `ðŸŽµ Agora: ${track.artist["#text"]} â€” ${track.name}`
            : `Ãšltima: ${track.artist["#text"]} â€” ${track.name}`;

          container.textContent = text;
        } catch (err) {
          container.textContent = "Erro ao carregar mÃºsica.";
        }
      }

      updateTrack();
      setInterval(updateTrack, 10000); // Atualiza a cada 10s
    </script>
  </body>
</html>